
http://wiki.kartbuilding.net/index.php/Trac_and_SVN

#SVN setup
sudo aptitude install python-subversion sqlite3 python-sqlite

svnadmin create /var/lib/svn/projectname --fs-type fsfs
chown -R www-data:www-data /var/lib/svn/projectname 
sudo trac-admin /home/user/projectname initenv
trac-admin /home/username/projectname/ permission add username MILESTONE_ADMIN REPORT_ADMIN ROADMAP_ADMIN TICKET_ADMIN TRAC_ADMIN

#ENABLE SMTP EMAIL
[notification]
smtp_enabled = true

#GET HTML LOGIN WORKING
after add user trac_admin, install the web page login plugin, copy the [components], [account-manager] from other trac conf/trac.conf files

#and disable default login method
[components]
trac.web.auth.loginmodule = disabled

#POPULATE PERMISSIONS
#run script from bottom of page

chown -R username:group /home/username/projectname
chgrp -R www-data /home/username/projectname/db
chmod -R 775 /home/username/projectname/db

#IMPORT TO SVN (note: trunk, 3 slashes)
svn import /var/www/limo file:///home/robin/svn/limo/trunk

#DIRECT ACCESS
svn co file:///home/robin/svn

#SSH ACCESS
svn co svn+ssh://trac.autoritel.com/home/robin/svn/autoritel/trunk

#PERMISSION
trac-admin trac/limo/ permission add robin TRAC_ADMIN

#ENABLE SMTP
#in conf/trac.ini, and setup exim
smtp_enabled = true

#SVN ignore
http://wolfram.kriesing.de/blog/index.php/2005/svnignore-and-svnkeywords
http://blog.vixiom.com/2007/02/21/how-to-ignore-all-files-in-a-directory-folder-with-subversion/

#to ignore recursively on all files
svn -R propset svn:ignore -F .svnignore .

#to ignore all files in specific folder #! DONT FORGET "" !
svn propset svn:ignore "*" tmp/cache/
OR
svn propedit svn:ignore ./

#recursive delete
find ./ -name "*.pyc" | xargs svn delete --force

#delete/remove files with exclamation status
svn status | grep ! | awk '{print $2}' | xargs svn rm 

#restore file from older revision to current
http://wiki.greenstone.org/wiki/index.php/Useful_SVN_Commands#Copying_an_older_revision_of_a_file_or_folder_back_into_the_current_svn_revision, does a commit
svn copy -r 21 file:///home/robin/svn/limo/trunk/cake file:///home/robin/svn/limo/trunk/cake -m 'restoring cake folder from old revision to current'

#delete current revision then restore older revision
http://marcgrabanski.com/article/svn-tip-overwrite-corrupt-revision

#update switch url
http://svnbook.red-bean.com/en/1.1/re27.html
svn switch URL PATH
svn switch URL
svn switch --relocate svn+ssh://192.168.1.100/svn/fashion/trunk svn+ssh://trac.empiriamedia.com/svn/fashion/trunk

#checkout without hidden .svn folders
svn export

#replace file with older revision
svn cat -r 50 file.py > file.py #this may be considerd a new change 
OR
svn update -r 50 file.py #this may be considered old


#SQL SCRIPT
insert into permission values("staff","WIKI_CREATE");
insert into permission values("staff","WIKI_VIEW");
insert into permission values("staff","WIKI_MODIFY");
insert into permission values("staff","REPORT_VIEW");
insert into permission values("staff","TICKET_VIEW");
insert into permission values("staff","TICKET_APPEND");
insert into permission values("staff","TICKET_CREATE");
insert into permission values("staff","TIMELINE_VIEW");
insert into permission values("staff","LOG_VIEW");
insert into permission values("staff","CHANGESET_VIEW");
insert into permission values("staff","FILE_VIEW");
insert into permission values("staff","TICKET_EDIT_CC");
insert into permission values("staff","TICKET_EDIT_DESCRIPTION");
insert into permission values("staff","TICKET_CHGPROP");
insert into permission values("staff","MILESTONE_ADMIN");
insert into permission values("staff","TICKET_MODIFY");
insert into permission values("charles","staff");
insert into permission values("phillllip","staff");
insert into permission values("martogi","staff");
insert into permission values("wishbone2712","staff");
insert into permission values("handy","staff");
insert into permission values("test","staff");
insert into permission values("yoko","staff");
insert into permission values("methilda","staff");
insert into permission values("christianus","staff");
insert into permission values("andy","staff");
insert into permission values("ibnu","staff");
insert into permission values("ivan","staff");
insert into permission values("marena","staff");
