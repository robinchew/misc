<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
	<meta name="keywords" content="NVIDIA drivers + screen lock-up bug, ubuntu forums,ubuntu linux,ubuntu,linux fourm,ubunut forum,linux ubuntu" />
	<meta name="description" content="[Archive] NVIDIA drivers + screen lock-up bug Hoary 5.04 Hardware Help" />
		<title>NVIDIA drivers + screen lock-up bug [Archive]  - Ubuntu Forums</title>
	<link rel="stylesheet" href="http://ubuntuforums.org/archive/archive.css" />
</head>
<body>
<div class="pagebody">
<div align="center" style="padding:4px;overflow:hidden;">
<script type="text/javascript"><!--
google_ad_client = "pub-9806935032004241";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text";
google_ad_channel ="4056880886";
google_color_border = "578A24";
google_color_bg = "CCFFCC";
google_color_link = "00008B";
google_color_url = "00008B";
google_color_text = "000000";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<div id="navbar"><a href="./">Ubuntu Forums</a> &gt; <a href="f-49.html">Ubuntu Hoary Hedgehog 5.04</a> &gt; <a href="f-57.html">Hoary 5.04 Hardware Help</a> &gt; NVIDIA drivers + screen lock-up bug</div>
<hr />
<div class="pda"><a href="?pda=1" rel="nofollow">PDA</a></div>
<p class="largefont">View Full Version : <a href="http://ubuntuforums.org/showthread.php?t=24703">NVIDIA drivers + screen lock-up bug</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">guyforget</div><div class="date">04-08-2005, 03:24 AM</div></div><div class="posttext">This bug is well documented over at the nvidia support forums (http://www.nvnews.net/vbulletin/forumdisplay.php?f=14). There is no clear fix, though some people have been successful with any number of random combinations of &quot;fixes.&quot; Reading the threads at the nvidia support forums (http://www.nvnews.net/vbulletin/forumdisplay.php?f=14) has given me the best support so far in stablizing my system.  <br />
<br />
The easiest fix for me was to simply go back to the standard vesa drivers by specifying them in my xorg.conf. I never had any screen lockous using these drivers but I didnt have any of the nice shit that my video card was purchased to do. Actually, I dont even have a nice video card as I dont do anything specifically video intensive; but theres principals involved here, and my hardware should friggin work. <br />
<br />
My situation: <br />
<br />
Mobo: Abit IS7-V2 / Intel 848P/ICH5 Chipsets<br />
GFX:  GeForce MX 4000<br />
NVIDIA Driver: 7174<br />
Kernel: 2.6.10-5-686-smp<br />
CPU: P4 3.0 HT<br />
OS: Ubuntu 5.04 Hoary<br />
<br />
X just locks. Hard. Mouse pointer still moves around the screen but all running apps are locked. Keyboard is locked. System is still functioning though. If I am moving large files from one drive to another (the crash happens most often when moving large files around different hdds) the files will continue to move. If audio is playing through BMP it will continue to play. I can ssh to the box and see that X is taking up 100% cpu and I can kill it from there. I can then restart X but it will usually lock the system up completely within a half hour. Its best to reset after the first crash it seems. There are mysterious lines in syslog:<br />
<br />
kernel: NVRM: Xid: 1, Channel 00000000 Method 00000000 Data 00005500<br />
<br />
This bug seems to be due to the nvidia drivers specifically, but is also reported using the &quot;nv&quot; drivers. It is not Ubuntu specific, but is xorg + nvidia drivers specific. <br />
<br />
Has anyone else had any luck resolving this issue on their system?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jery_wang2002</div><div class="date">04-08-2005, 07:26 AM</div></div><div class="posttext">Easy, you can still use nvidia drivers<br />
you just need to disable <br />
#RenderAccel  &quot;true&quot;<br />
<br />
Mine works this way, but slow with antialiasing on.<br />
<br />
Ubuntu rocks. But the problem is somewhere else. And it may not be nvidia since it also happens to ATI card too according to some in nvforums.<br />
<br />
This bug is well documented over at the nvidia support forums (http://www.nvnews.net/vbulletin/forumdisplay.php?f=14). There is no clear fix, though some people have been successful with any number of random combinations of &quot;fixes.&quot; Reading the threads at the nvidia support forums (http://www.nvnews.net/vbulletin/forumdisplay.php?f=14) has given me the best support so far in stablizing my system.  <br />
<br />
The easiest fix for me was to simply go back to the standard vesa drivers by specifying them in my xorg.conf. I never had any screen lockous using these drivers but I didnt have any of the nice shit that my video card was purchased to do. Actually, I dont even have a nice video card as I dont do anything specifically video intensive; but theres principals involved here, and my hardware should friggin work. <br />
<br />
My situation: <br />
<br />
Mobo: Abit IS7-V2 / Intel 848P/ICH5 Chipsets<br />
GFX:  GeForce MX 4000<br />
NVIDIA Driver: 7174<br />
Kernel: 2.6.10-5-686-smp<br />
CPU: P4 3.0 HT<br />
OS: Ubuntu 5.04 Hoary<br />
<br />
X just locks. Hard. Mouse pointer still moves around the screen but all running apps are locked. Keyboard is locked. System is still functioning though. If I am moving large files from one drive to another (the crash happens most often when moving large files around different hdds) the files will continue to move. If audio is playing through BMP it will continue to play. I can ssh to the box and see that X is taking up 100% cpu and I can kill it from there. I can then restart X but it will usually lock the system up completely within a half hour. Its best to reset after the first crash it seems. There are mysterious lines in syslog:<br />
<br />
kernel: NVRM: Xid: 1, Channel 00000000 Method 00000000 Data 00005500<br />
<br />
This bug seems to be due to the nvidia drivers specifically, but is also reported using the &quot;nv&quot; drivers. It is not Ubuntu specific, but is xorg + nvidia drivers specific. <br />
<br />
Has anyone else had any luck resolving this issue on their system?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">wolovids</div><div class="date">04-08-2005, 09:40 AM</div></div><div class="posttext">Easy, you can still use nvidia drivers<br />
you just need to disable <br />
#RenderAccel  &quot;true&quot;<br />
<br />
Mine works this way, but slow with antialiasing on.<br />
<br />
Ubuntu rocks. But the problem is somewhere else. And it may not be nvidia since it also happens to ATI card too according to some in nvforums.I disabled RenderAccel in my xorg.conf file and I haven't experienced a lock up since.  Here's the <br />
bug (https://bugzilla.ubuntu.com/show_bug.cgi?id=7183) in Ubuntu's bug tracking system relating to this.  <br />
<br />
Turning off RenderAccel isn't the best fix because window resizing is ssssllllooowww.  Hopefully Nvidia will fix this soon and there will be an update for Hoary near.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">jery_wang2002</div><div class="date">04-08-2005, 09:43 AM</div></div><div class="posttext">I disabled RenderAccel in my xorg.conf file and I haven't experienced a lock up since.  Here's the <br />
bug (https://bugzilla.ubuntu.com/show_bug.cgi?id=7183) in Ubuntu's bug tracking system relating to this.  <br />
<br />
Turning off RenderAccel isn't the best fix because window resizing is ssssllllooowww.  Hopefully Nvidia will fix this soon and there will be an update for Hoary near.<br />
<br />
Yeah, ssssslllllooooooooooooooooooooowwwww when I use 1600x1200 res, esp with anti-aliasing on. There is no way I turn off anti-aliasing, after looking this nice smooth clear fonts, going back to non-antialiased is no option.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kuleali</div><div class="date">04-09-2005, 10:48 AM</div></div><div class="posttext">I have the same problem hear with x freezing. I hate that. <br />
<br />
Is it possible to use xfree86 in hoary insted of xorg ?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Mindstab</div><div class="date">04-22-2005, 02:49 PM</div></div><div class="posttext">what would be better is if they let us downgrade the nvidia kernel package to one that worked :/</div></div><hr />


<div class="post"><div class="posttop"><div class="username">capper308</div><div class="date">05-02-2005, 10:22 PM</div></div><div class="posttext">Hi there.  I am VERY new to Ubuntu.  This is my first post.  Can someone tell me how to downgrade my nvidia video drivers. I currently have 7xxx installed and I want 6111 installed.  The reason is that I am tring to play doom3 and mohaa and I keep getting and error that opengl cannot start.  I am using Ubunty Hoary 5.04  Thanks in advance</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rosslaird</div><div class="date">05-02-2005, 11:27 PM</div></div><div class="posttext">There are at least two bugs: one involves the mouse still working while the rest of the screen freezes. Disabling RenderAccel seems to work pretty well for most people in this situation (but by no means everyone).<br />
<br />
The second bug (which I have) involves the entire x session crashing to a black screen. The only way to fix this is to downgrade the nvidia drivers to the 6 series (both bugs are with the 7 series only). Or by going back to &quot;nv&quot; in xorg.conf. Ouch! And it might  not work for everyone.<br />
<br />
There seems to be no permanent resolution at the moment, but a host of folks have complained to nvidia, so I suppose they will respond eventually.<br />
<br />
Ross</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nocturn</div><div class="date">05-03-2005, 02:48 AM</div></div><div class="posttext">There are at least two bugs: one involves the mouse still working while the rest of the screen freezes. Disabling RenderAccel seems to work pretty well for most people in this situation (but by no means everyone).<br />
<br />
The second bug (which I have) involves the entire x session crashing to a black screen. The only way to fix this is to downgrade the nvidia drivers to the 6 series (both bugs are with the 7 series only). Or by going back to &quot;nv&quot; in xorg.conf. Ouch! And it might  not work for everyone.<br />
<br />
There seems to be no permanent resolution at the moment, but a host of folks have complained to nvidia, so I suppose they will respond eventually.<br />
<br />
Ross<br />
<br />
Actually, I mailed Nvidia and got a response the same day.  I'm hit with the 'screen freeze but mouse still moves' thingie.  I disabled RenderAccel as they suggested and so far it's going well.<br />
<br />
I do hope they get arround to fixing it though (renderaccell really helped performance).<br />
<br />
The strange thing is that I never had any problems with renderaccel on until Xorg and Nvidia 7174 (in Hoary).  So something must have changed to cause this.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jvaldezjr</div><div class="date">05-03-2005, 03:51 PM</div></div><div class="posttext">I'm having the same problem, and its only produced when I have the nvidia-glx package installed.  So I removed it.  Problem solved right?  No, cause now I cant play certain games that rely on glx to run.  :(<br />
<br />
I'll try to reinstall the drivers, and change that option in the Xorg file and see where that goes.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">flightcrank</div><div class="date">05-03-2005, 07:27 PM</div></div><div class="posttext">i have the mosue move screen frezze bug, and turning off reder execl still dosn't fix the issue !</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jad</div><div class="date">05-04-2005, 01:00 AM</div></div><div class="posttext">I have same problem, and its really annoying,<br />
here is my xorg.conf<br />
<br />
# XF86Config-4 (XFree86 X Window System server configuration file)<br />
#<br />
# This file was generated by dexconf, the Debian X Configuration tool, using<br />
# values from the debconf database.<br />
#<br />
# Edit this file with caution, and see the XF86Config-4 manual page.<br />
# (Type &quot;man XF86Config-4&quot; at the shell prompt.)<br />
#<br />
# This file is automatically updated on xserver-xfree86 package upgrades *only*<br />
# if it has not been modified since the last upgrade of the xserver-xfree86<br />
# package.<br />
#<br />
# If you have edited this file but would like it to be automatically updated<br />
# again, run the following commands as root:<br />
#<br />
#   cp /etc/X11/XF86Config-4 /etc/X11/XF86Config-4.custom<br />
#   md5sum /etc/X11/XF86Config-4 &gt;/var/lib/xfree86/XF86Config-4.md5sum<br />
#   dpkg-reconfigure xserver-xfree86<br />
<br />
Section &quot;Files&quot;<br />
	FontPath	&quot;unix/:7100&quot;			# local font server<br />
	# if the local font server has problems, we can fall back on these<br />
	FontPath	&quot;/usr/lib/X11/fonts/misc&quot;<br />
	FontPath	&quot;/usr/lib/X11/fonts/cyrillic&quot;<br />
	FontPath	&quot;/usr/lib/X11/fonts/100dpi/:unscaled&quot;<br />
	FontPath	&quot;/usr/lib/X11/fonts/75dpi/:unscaled&quot;<br />
	FontPath	&quot;/usr/lib/X11/fonts/Type1&quot;<br />
	FontPath	&quot;/usr/lib/X11/fonts/CID&quot;<br />
	FontPath	&quot;/usr/lib/X11/fonts/Speedo&quot;<br />
	FontPath	&quot;/usr/lib/X11/fonts/100dpi&quot;<br />
	FontPath	&quot;/usr/lib/X11/fonts/75dpi&quot;<br />
        # paths to defoma fonts<br />
	FontPath	&quot;/var/lib/defoma/x-ttcidfont-conf.d/dirs/TrueType&quot;<br />
	FontPath	&quot;/var/lib/defoma/x-ttcidfont-conf.d/dirs/CID&quot;<br />
EndSection<br />
<br />
Section &quot;Module&quot;<br />
	Load	&quot;GLcore&quot;<br />
	Load	&quot;bitmap&quot;<br />
	Load	&quot;dbe&quot;<br />
	Load	&quot;ddc&quot;<br />
	Load	&quot;dri&quot;<br />
	Load	&quot;extmod&quot;<br />
	Load	&quot;freetype&quot;<br />
	Load	&quot;glx&quot;<br />
	Load	&quot;int10&quot;<br />
	Load	&quot;record&quot;<br />
	Load	&quot;speedo&quot;<br />
	Load	&quot;type1&quot;<br />
	Load	&quot;v4l&quot;<br />
	Load	&quot;vbe&quot;<br />
	Load	&quot;xtt&quot;<br />
EndSection<br />
<br />
Section &quot;InputDevice&quot;<br />
	Identifier	&quot;Generic Keyboard&quot;<br />
	Driver		&quot;keyboard&quot;<br />
	Option		&quot;CoreKeyboard&quot;<br />
	Option		&quot;XkbRules&quot;	&quot;xfree86&quot;<br />
	Option		&quot;XkbModel&quot;	&quot;pc104&quot;<br />
	Option		&quot;XkbLayout&quot;	&quot;us&quot;<br />
EndSection<br />
<br />
Section &quot;InputDevice&quot;<br />
	Identifier	&quot;Configured Mouse&quot;<br />
	Driver		&quot;mouse&quot;<br />
	Option		&quot;CorePointer&quot;<br />
	Option		&quot;Device&quot;		&quot;/dev/input/mice&quot;<br />
	Option		&quot;Protocol&quot;		&quot;ImPS/2&quot;<br />
	Option		&quot;Emulate3Buttons&quot;	&quot;true&quot;<br />
	Option		&quot;ZAxisMapping&quot;		&quot;4 5&quot;<br />
EndSection<br />
<br />
Section &quot;Device&quot;<br />
	Identifier	&quot;NVIDIA Corporation NV17 [GeForce4 MX 440]&quot;<br />
	Driver		&quot;nvidia&quot;<br />
	BusID		&quot;PCI:1:0:0&quot;<br />
 	Option          &quot;NoLogo&quot;<br />
EndSection<br />
<br />
Section &quot;Monitor&quot;<br />
	Identifier	&quot;500G&quot;<br />
	HorizSync	30-54<br />
	VertRefresh	50-120<br />
	Option		&quot;DPMS&quot;<br />
EndSection<br />
<br />
Section &quot;Screen&quot;<br />
	Identifier	&quot;Default Screen&quot;<br />
	Device		&quot;NVIDIA Corporation NV17 [GeForce4 MX 440]&quot;<br />
	Monitor		&quot;500G&quot;<br />
	DefaultDepth	24<br />
	SubSection &quot;Display&quot;<br />
		Depth		1<br />
		Modes		&quot;1024x768&quot; &quot;800x600&quot; &quot;720x450&quot; &quot;720x400&quot; &quot;640x480&quot;<br />
	EndSubSection<br />
	SubSection &quot;Display&quot;<br />
		Depth		4<br />
		Modes		&quot;1024x768&quot; &quot;800x600&quot; &quot;720x450&quot; &quot;720x400&quot; &quot;640x480&quot;<br />
	EndSubSection<br />
	SubSection &quot;Display&quot;<br />
		Depth		8<br />
		Modes		&quot;1024x768&quot; &quot;800x600&quot; &quot;720x450&quot; &quot;720x400&quot; &quot;640x480&quot;<br />
	EndSubSection<br />
	SubSection &quot;Display&quot;<br />
		Depth		15<br />
		Modes		&quot;1024x768&quot; &quot;800x600&quot; &quot;720x450&quot; &quot;720x400&quot; &quot;640x480&quot;<br />
	EndSubSection<br />
	SubSection &quot;Display&quot;<br />
		Depth		16<br />
		Modes		&quot;1024x768&quot; &quot;800x600&quot; &quot;720x450&quot; &quot;720x400&quot; &quot;640x480&quot;<br />
	EndSubSection<br />
	SubSection &quot;Display&quot;<br />
		Depth		24<br />
		Modes		&quot;1024x768&quot; &quot;800x600&quot; &quot;720x450&quot; &quot;720x400&quot; &quot;640x480&quot;<br />
	EndSubSection<br />
EndSection<br />
<br />
Section &quot;ServerLayout&quot;<br />
	Identifier	&quot;Default Layout&quot;<br />
	Screen		&quot;Default Screen&quot;<br />
	InputDevice	&quot;Generic Keyboard&quot;<br />
	InputDevice	&quot;Configured Mouse&quot;<br />
EndSection<br />
<br />
Section &quot;DRI&quot;<br />
	Mode	0666<br />
EndSection<br />
<br />
cant find a solution, please advise</div></div><hr />


<div class="post"><div class="posttop"><div class="username">nocturn</div><div class="date">05-04-2005, 03:37 AM</div></div><div class="posttext">It's an Nvidia bug, I suggest filing a bugreport.<br />
<br />
That said, if you have GLX, you need to comment out GLCore and DRI (although this should not cause the lock-up).<br />
<br />
For me, disabling renderaccel did the trick, but I see that you do not have it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jvaldezjr</div><div class="date">05-04-2005, 08:23 AM</div></div><div class="posttext">From what I understand, RenderAccel is on by default when the drivers are installed, it's just not listed in the X.org file for some reason.  That's what I read on an earlier thread about NVidia crashes (sorry, I dont remember where).  So you have to include it in the file to disable it I believe.  I just dont know (understand) what part of the file you need to include that switch.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rosslaird</div><div class="date">05-04-2005, 12:27 PM</div></div><div class="posttext">&quot;Option&quot;     &quot;RenderAccel&quot;    &quot;false&quot;<br />
<br />
should do it (in the Device Section)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Jvaldezjr</div><div class="date">05-04-2005, 04:01 PM</div></div><div class="posttext">&quot;Option&quot;     &quot;RenderAccel&quot;    &quot;false&quot;<br />
<br />
should do it (in the Device Section)<br />
 Thanks we'll see if this solves it now....</div></div><hr />


<div class="post"><div class="posttop"><div class="username">sgbooth</div><div class="date">05-08-2005, 09:10 PM</div></div><div class="posttext">This isn't a NVidia only specific bug.  I have a ATI radeon 7000 or something really cheap and it was locking frequently.  Its good now that RenderAccel is off.<br />
<br />
sgb</div></div><hr />


<div class="post"><div class="posttop"><div class="username">zki</div><div class="date">05-09-2005, 04:45 PM</div></div><div class="posttext">I had same problem with hanging X (with mouse cursor still alive).<br />
I haven't thought about the RenderAccel option, but since I've come to Ubuntu from Gentoo (with which my A64 worked well) last month I thought that it will be good to throw everything I haven't used in Gentoo out from the system. And that everything was the 'powernowd' daemon.<br />
I have not check the RenderAccel option influence on my machine, but without powernowd it's not hanging (and RenderAccel is, and was always set to &quot;true&quot;)<br />
Sorry for my surely not grammatic english.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">kassetra</div><div class="date">05-21-2005, 03:27 PM</div></div><div class="posttext">Actually, I mailed Nvidia and got a response the same day. I'm hit with the 'screen freeze but mouse still moves' thingie. I disabled RenderAccel as they suggested and so far it's going well.<br />
<br />
I do hope they get arround to fixing it though (renderaccell really helped performance).<br />
<br />
The strange thing is that I never had any problems with renderaccel on until Xorg and Nvidia 7174 (in Hoary). So something must have changed to cause this.<br />
<br />
For anyone that tries the RenderAccel solution and it doesn't work:<br />
Downgrade your nvidia-kernel-common and nvidia-kernel-source to the 7167 release (no need to downgrade the glx) - and it should stop having hard lockups.<br />
<br />
The nVidia forums suggests that the release after 7174 should fix this issue with Xorg 6.8.1+</div></div><hr />


<div class="post"><div class="posttop"><div class="username">pointym5</div><div class="date">06-13-2005, 05:54 PM</div></div><div class="posttext">The nVidia forums suggests that the release after 7174 should fix this issue with Xorg 6.8.1+<br />
<br />
Not for me they don't.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">munkay</div><div class="date">06-14-2005, 10:18 PM</div></div><div class="posttext">I managed to cause my X not to crash anymore with the screen freeze + mouse moves bug by downgrading my NVIDIA driver version to version 6629.<br />
<br />
Here's some instructions if you need it:<br />
<br />
To get the driver package, use this if you have wget:<br />
wget http://download.nvidia.com/XFree86/Linux-x86/1.0-6629/NVIDIA-Linux-x86-1.0-6629-pkg1.run<br />
<br />
Then you need the kernel-headers package for your version of kernel. To find out your version, type:<br />
uname -r<br />
<br />
Then get the package for your linux using apt:<br />
sudo apt-get install linux-headers-`uname -r`<br />
<br />
Now you need to shut down your display manager, I use gnome so to shut down the gdm i go to one of the terminals with Alt + Control + [1-6] and then typing:<br />
sudo /etc/init.d/gdm stop<br />
<br />
This will stop the gdm. Now you can install the nvidia package. Go to where you downloaded the package and type:<br />
chmod +x NVIDIA-Linux-x86-1.0-6629-pkg1.run<br />
./NVIDIA-Linux-x86-1.0-6629-pkg1.run<br />
<br />
The installer will then compile the kernel module for your kernel with version 6629, and after it finishes, you can restart gdm by running:<br />
sudo /etc/init.d/gdm start<br />
<br />
Now enable xcompmgr with whatever settings you want. Hope it works for you, it seems to work for me find. I've managed to get shadows and transparency working without problems so far using RenderAccel enabled.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rosslaird</div><div class="date">06-15-2005, 01:20 AM</div></div><div class="posttext">Well, I followed the above and now X is dead...<br />
<br />
I have tried reconfiguring the server, tried a differnet kernel, tried reinstalling the module, all to no avail.<br />
<br />
I think that part of the problem may be that every time I reboot, the Nvidia driver does this : &quot;Creating NVIDIA TLS Links&quot; and I believe it links the old driver incorrectly. But when I symbolically link the 6 series driver manually to the dynamic library, that doesn't work either. (The NVIDIA module does seem to load, however; it gets an &quot;OK&quot; beside it at bootup.)<br />
<br />
X is dead. I think I may have mentioned this. And I can't check the log file because every time I try to start X my whole system hard locks.<br />
<br />
Any ideas on where to go from here?<br />
<br />
Later:<br />
<br />
OK, small progress. I can get a sort-of gdm screen, which tells me that the version of the driver for X (6 series) is different than the version of the kernel module (7 series). However, I did run the 6 series installer on the correct kernel, and it completed without any errors.<br />
<br />
<br />
Thanks.<br />
<br />
Ross</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ritger</div><div class="date">06-15-2005, 07:25 AM</div></div><div class="posttext">I had exactly the same lockup bug. It become somewhat less common after disabling RenderAccel., but it would still lock up once a week (which is still too much). After trying nearly everything (kernel boot options, downgrading etc) is went into my BIOS to see if anything there was wrong. I found a small option called `APIC Support', set to 1.4. After disabling this and rebooting into my system i haven't had a lockup in two weeks. So i'm gonna try enabling RenderAccel again and see how it'll hold up. For now, disabling APIC seems to work just fine (no weird behavior from anything using interrupts, at least, not that i can tell). Using a GeForce 2MX with the default Hoary packages for nvidia and Xorg</div></div><hr />


<div class="post"><div class="posttop"><div class="username">munkay</div><div class="date">06-15-2005, 11:28 AM</div></div><div class="posttext">Well, I followed the above and now X is dead...<br />
<br />
I have tried reconfiguring the server, tried a differnet kernel, tried reinstalling the module, all to no avail.<br />
<br />
I think that part of the problem may be that every time I reboot, the Nvidia driver does this : &quot;Creating NVIDIA TLS Links&quot; and I believe it links the old driver incorrectly. But when I symbolically link the 6 series driver manually to the dynamic library, that doesn't work either. (The NVIDIA module does seem to load, however; it gets an &quot;OK&quot; beside it at bootup.)<br />
<br />
X is dead. I think I may have mentioned this. And I can't check the log file because every time I try to start X my whole system hard locks.<br />
<br />
Any ideas on where to go from here?<br />
<br />
Later:<br />
<br />
OK, small progress. I can get a sort-of gdm screen, which tells me that the version of the driver for X (6 series) is different than the version of the kernel module (7 series). However, I did run the 6 series installer on the correct kernel, and it completed without any errors.<br />
<br />
<br />
Thanks.<br />
<br />
Ross<br />
<br />
Do you have the kernel-header module for your kernel version? Also, check the nvidia website (http://www.nvidia.com) for info about the TLS links. I remember seeing a bit there about how to get around it. Also. You have to change a symbolic link for one of the .so files in /usr/X11R6/ (I think, or some directory like that) to automatically use the 6 series of module instead of 7 series. The installer should have promoted you to create this symlink. If not, I'll try to find out the files to link/unlink.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">rosslaird</div><div class="date">06-15-2005, 11:33 AM</div></div><div class="posttext">Thanks for the feedback.<br />
<br />
Do you have the kernel-header module for your kernel version?<br />
<br />
Yup.<br />
<br />
 Also, check the nvidia website (http://www.nvidia.com) for info about the TLS links. I remember seeing a bit there about how to get around it.<br />
<br />
That's next.<br />
<br />
<br />
 Also. You have to change a symbolic link for one of the .so files in /usr/X11R6/ (I think, or some directory like that) to automatically use the 6 series of module instead of 7 series. The installer should have promoted you to create this symlink. <br />
<br />
It did. The symlink is in /usr/X11R6/lib, and I have manually adjusted it probably a dozen times by now. It no longer seems to get adjusted at bootup (now that in absolute frustration I have installed the latest 7664 version), but X still will not work with &quot;nvidia&quot; in my xorg.conf file. It will work, however, with &quot;nv&quot;. Believe it or not, this is a major improvement, since I can now at least get some type of X session.<br />
<br />
Update:<br />
<br />
More progress:<br />
<br />
I uninstalled the nvidia driver from www.nvidia.com:<br />
<br />
sh NVIDIA-Linux-x86-1.0-7664-pkg1.run --uninstall<br />
<br />
I purged these packages (using &quot;aptitude purge ...&quot;)<br />
nvidia-glx<br />
nvidia-settings<br />
linux-restricted-modules-k7<br />
<br />
Then I reinstalled them using aptitude<br />
<br />
I am now back using X with the nvidia driver -- or, I'm back to where I started before this whole mess...<br />
<br />
<br />
Ross</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Deathpickle</div><div class="date">06-17-2005, 08:45 AM</div></div><div class="posttext">I had exactly the same lockup bug. It become somewhat less common after disabling RenderAccel., but it would still lock up once a week (which is still too much). After trying nearly everything (kernel boot options, downgrading etc) is went into my BIOS to see if anything there was wrong. I found a small option called `APIC Support', set to 1.4. After disabling this and rebooting into my system i haven't had a lockup in two weeks. So i'm gonna try enabling RenderAccel again and see how it'll hold up. For now, disabling APIC seems to work just fine (no weird behavior from anything using interrupts, at least, not that i can tell). Using a GeForce 2MX with the default Hoary packages for nvidia and Xorg <br />
<br />
For what it's worth I was running like a champ using the new drivers full options ..... the works .... until I updated my BIOS (was over a year old) and then I started having these problems. I had some controller issues before hand and have replaced the board (haven't tried to enable 3D or anything yet) but your post now makes sense as to why it worked and then didn't.<br />
<br />
A question for the rest .... those of us getting the black screen/lock up issues what chipsets do you have? Reason I ask is I see this is not only happening to Linux but Windows user's as well and it seems to be happening to the VIA chipsets.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">senfunn</div><div class="date">06-17-2005, 10:49 AM</div></div><div class="posttext">Iam pretty new to linux ... <br />
<br />
I have winchester(3000+), MSI neo4 platinum (nforce4 ultra) , nvidia 6600GT (there the problem comes) .. <br />
<br />
I get some flashy colorful screen after booting ubuntu (both live cd and from HDD) (both IA32 and amd64 versions )<br />
<br />
could anyone tell me by procedure what are the steps to be done to get ubuntu running .<br />
<br />
Iam determined to use ubuntu as for the caption and will try hard to do the same .</div></div><hr />


<div class="post"><div class="posttop"><div class="username">ritger</div><div class="date">06-17-2005, 01:34 PM</div></div><div class="posttext">Well using RenderAccel again didn't work, it locked back up again (that's my fault though, nvidia does warn that it's an experimental function). For now it seems stable again, although i'm curious to find out what APIC is actually for (google wasn't too clear on that).<br />
<br />
A question for the rest .... those of us getting the black screen/lock up issues what chipsets do you have? Reason I ask is I see this is not only happening to Linux but Windows user's as well and it seems to be happening to the VIA chipsets.Yup, i have an Abit-KD7 (i think) with a VIA KT400 chipset. I also have a problem on using Xv on the tv-out of the card. That always worked fine, until the driver hit 6.xxxx, at that point Xv displays a blue line and messes up the main display. Using Xshm gets around that, although playing a movie on the tv means a 30% cpu load (instead of the 8% with Xv). It's nothing critical, but it might be another symptom.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">neighborlee</div><div class="date">06-21-2005, 10:28 PM</div></div><div class="posttext">I managed to cause my X not to crash anymore with the screen freeze + mouse moves bug by downgrading my NVIDIA driver version to version 6629.<br />
<br />
Here's some instructions if you need it:<br />
<br />
To get the driver package, use this if you have wget:<br />
wget http://download.nvidia.com/XFree86/Linux-x86/1.0-6629/NVIDIA-Linux-x86-1.0-6629-pkg1.run<br />
<br />
Then you need the kernel-headers package for your version of kernel. To find out your version, type:<br />
uname -r<br />
<br />
Then get the package for your linux using apt:<br />
sudo apt-get install linux-headers-`uname -r`<br />
<br />
Now you need to shut down your display manager, I use gnome so to shut down the gdm i go to one of the terminals with Alt + Control + [1-6] and then typing:<br />
sudo /etc/init.d/gdm stop<br />
<br />
This will stop the gdm. Now you can install the nvidia package. Go to where you downloaded the package and type:<br />
chmod +x NVIDIA-Linux-x86-1.0-6629-pkg1.run<br />
./NVIDIA-Linux-x86-1.0-6629-pkg1.run<br />
<br />
The installer will then compile the kernel module for your kernel with version 6629, and after it finishes, you can restart gdm by running:<br />
sudo /etc/init.d/gdm start<br />
<br />
Now enable xcompmgr with whatever settings you want. Hope it works for you, it seems to work for me find. I've managed to get shadows and transparency working without problems so far using RenderAccel enabled.<br />
<br />
<br />
I downgraded to 6629 and i'm stil getting lockups..<br />
<br />
yesterday I tried to start: 'run as different user' dialogue from menu and before I could type in anything bam X locked on me..<br />
<br />
I tried to 'restart' from ctrl-altF1 I think it was, and cupsd hung on trying to stop that service...<br />
<br />
just an fyi in case it helps someone diagnose this mess<br />
<br />
cheers<br />
nl</div></div><hr />


<div class="post"><div class="posttop"><div class="username">m0ns00n</div><div class="date">10-10-2005, 04:51 PM</div></div><div class="posttext">I think the Nvidia drivers are just buggy. In a way its not the ubuntu developers fault.. But it is aggrevating that the last working driver for the cards to and pre GeForce 4000 MX is 1.0.6111... It's very old now. Who knows why they can't make decent drivers, it's beyond me. Perhaps they should hire some better low level programmers.<br />
<br />
Anyhow - I guess it's time to upgrade my hardware soon. I'm just a bit afraid of this happening again - ending up with an unsupported app. If you look at it another way, the Ubuntu developers are wrong to set a version on the nvidia drivers. Each version should have their own subversion with which patches they are given so that they could be upgraded - if somebody needed new drivers, they'd just specify the version they wanted. This way, I could still use the 1.0.6111 drivers and live with an accelerated desktop..</div></div><hr />


<div class="post"><div class="posttop"><div class="username">tseliot</div><div class="date">10-10-2005, 05:28 PM</div></div><div class="posttext">Who knows why they can't make decent drivers, it's beyond me. Perhaps they should hire some better low level programmers.<br />
It's obvious that Nvidia uses most of its resources for its Windows drivers (its main market).</div></div><hr />

<div align="center" style="padding:4px; overflow: hidden;">
<script type="text/javascript"><!--
google_ad_client = "pub-9806935032004241";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text";
google_ad_channel ="4056880886";
google_color_border = "578A24";
google_color_bg = "CCFFCC";
google_color_link = "00008B";
google_color_url = "00008B";
google_color_text = "000000";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>

<div id="copyright">vBulletin v3.5.1, Copyright &copy;2000-2005, Jelsoft Enterprises Ltd.</div>
</div>
</body>
</html>